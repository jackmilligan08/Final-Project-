import turtle
from turtle import * 
import random

def movement():
    turtle.onkey(p1right, "d")
    turtle.onkey(p1left, "a")
    turtle.onkey(p2right, "Right")
    turtle.onkey(p2left, "Left")

    p1borders()
    p2borders() 

def p1right():
    p1xcor = player1.xcor()
    player1.setx(p1xcor+playerxVelright)
    #todo - possibly optimize by only setting shape if it changed direction 5/15
    player1.shape("player1right.gif")

def p1left():
    p1xcor = player1.xcor()
    player1.setx(p1xcor+playerxVelleft)
    player1.shape("player1left.gif")

def p2right():
    p2xcor = player2.xcor()
    player2.setx(p2xcor+playerxVelright)
    player2.shape("player2right.gif")

def p2left():
    p2xcor = player2.xcor()
    player2.setx(p2xcor+playerxVelleft)
    player2.shape("player2left.gif")


def p1borders():
    p1xcor = player1.xcor()
    if p1xcor>RIGHT_EDGE:
        player1.setx(-1*p1xcor+25)
    if p1xcor<LEFT_EDGE:
        player1.setx(-1*p1xcor-25)

def p2borders():
    p2xcor = player2.xcor()
    if p2xcor>RIGHT_EDGE:
        player2.setx(-1*p2xcor+25)
    if p2xcor<LEFT_EDGE:
        player2.setx(-1*p2xcor-25)
    return

def p1collisions():
    return

def p2collisions():
    return

def createbombs():
    global MAXBOMBS, numbombs, bomblist
    
    #check if you need to create more bombs,if not exit this function
    #if you do then, calculate how many more you need to create and
    #go in a loop for that number (or throw in some randomness)
    
    numbombs = len(bomblist)
    
    if numbombs >= MAXBOMBS:
        pass
    else:
        neededbombs = MAXBOMBS - numbombs
        for currbomb in range(0, neededbombs):
            bomblist.append(Turtle())
            bombposx=random.randint(-475,475)
            bombposy=random.randint(275, 285)


            bomblist[currbomb].hideturtle()
            bomblist[currbomb].penup()
            bomblist[currbomb].speed(0)
            bomblist[currbomb].setx(bombposx)
            bomblist[currbomb].sety(bombposy)
            bomblist[currbomb].shape('circle')
            bomblist[currbomb].shapesize(stretch_len=1.5,stretch_wid=1.5)
            bomblist[currbomb].color("black")
            bomblist[currbomb].showturtle()
        return

#Global
MAXBOMBS=15
bomblist=[]

#Constants
playerxVelright = 20
playerxVelleft = -20

RIGHT_EDGE=450
LEFT_EDGE=-450

#Screen Setup (Version1) 
screen=turtle.Screen()
screen.setup(850,515)
screen.title("Bombs Away")
screen.bgcolor("skyblue")
screen.tracer(0) 
screen.bgpic(picname="bg3.gif")


#Adding Turtles
#adding player1 (aircraft carrier) 
player1=Turtle()

player1.penup() 
turtle.addshape(name="player1right.gif", shape=None)
player1.shape("player1right.gif")
player1.setx(-150)
player1.sety(-175) 

#adding player2 (#destroyer)
player2=Turtle()

player2.penup() 
turtle.addshape(name="player2left.gif", shape=None)
player2.shape("player2left.gif")
player2.setx(150)
player2.sety(-171) 


#Adding shapes 
turtle.addshape(name="player1right.gif", shape=None)
turtle.addshape(name="player1left.gif", shape=None)
turtle.addshape(name="player2right.gif", shape=None)
turtle.addshape(name="player2left.gif", shape=None)

while(True):
    screen.update()
    turtle.listen()
    createbombs()
    movement()
